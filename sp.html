<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
<title>解答画面 - Quiz</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link href="src/css/quiz.css" rel="stylesheet">
<style>[v-cloak] { display:none }</style>
</head>
<body>

<header>
    <h1>Quiz</h1>
</header>

<main v-cloak>
    <section>
        <h2>Q.{{num}}</h2>
    </section>

    <section>
        <ol>
           <li v-repeat="exA">
                <label><input type="radio" name="exA" value="{{$value}}"></label>
            </li>
        </ol>
    </section>
</main>

<footer>©MeHerBu</footer>

<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/vue/0.10.5/vue.min.js"></script>
<script src='https://cdn.mlkcca.com/v2.0.0/milkcocoa.js'></script>
<script src="src/js/app.js"></script>

<script>
// --------------------------------------------------------
// View
// --------------------------------------------------------
var vue = new Vue({
    el: 'main',
    data: {
        num: 1,
        exA: []
    },

    methods:{
        // JSONを取得
        getJson: function(){
            $.getJSON(jsonPath).done(function(data){
                qaJson = data;
                getObjLength(qaJson);
                vue.getActQuiz(qaJson);
            });
        },

        getActQuiz: function(qaJson){
            var _this = this;

            DS.get(msgID, function(err, data){
                _this.$set('num', data.value.DSactNum);
                _this.$set('exA', _.range(getObjLength(qaJson.q1.answer)));
            });
        },

        // 問題を切り替える処理
        changeQ: function(n, max){
            this.$set('num', n);
            this.$set('exA', _.range(max));
        }
    }
});


// --------------------------------------------------------
// イベント通知
// --------------------------------------------------------
DS.on('send', function(data){
    vue.changeQ(data.value.DSactNum, data.value.DSmaxNum);
});

// 初回描画
vue.getJson();

</script>

</body>
</html>